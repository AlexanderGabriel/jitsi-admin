{% extends 'base.html.twig' %}

{% block CTA %}

{% endblock %}

{% block body %}

    <div class="container">
        <div class="row">
            <div class="col-md-6 mb-3">
                <a href="{{ path('room_new') }}" class="loadContent">
                    <div class="card card-body bg-policy">
                        <p class="mt-4 mb-4 text-center">
                            {{ 'Neue Konferenz'|trans }}
                        </p>
                    </div>
                </a>
            </div>

        </div>


        {% for room in rooms | filter (room => room.start > date()) | sort((a, b) => a.start <=> b.start) %}
            <div class="card card-body mb-1 text-lg-left text-center">
                <div class="row">
                    <div class="col-md-6">
                        <h5 class="h5-responsive">{{ room.name }}</h5> {% if app.user == room.moderator %}<span class="badge-info">Moderator</span>{% endif %} <br>
                        Start: {{ room.start|date('d.m.Y H:i') }}<br>
                        Server: {{ room.server.url }}<br>
                        Anzahl Teilnehmer: {{ room.user|length }}
                    </div>
                    <div class="col-md-2">
                        <div class="dropdown">
                            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenu1"
                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                Optionen
                            </button>
                            <ul class="dropdown-menu p-1" aria-labelledby="dropdownMenu1">
                                <li><a href="{{ path('room_remove',{'room':room.id}) }}">
                                        Löschen</a></li>
                                <li><a href="{{ path('room_new',{'id':room.id}) }}" class="loadContent">
                                        Bearbeiten</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <div class="dropdown">
                            <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenu1"
                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                Beitreten
                            </button>
                            <ul class="dropdown-menu p-1" aria-labelledby="dropdownMenu1">
                                <li><a href="{{ path('room_join',{'t':'b','room':room.id}) }}" target="_blank">Im Browser</a></li>
                                <li role="separator" class="divider"></li>
                                <li><a href="{{ path('room_join',{'t':'a','room':room.id}) }}" target="_blank">In der App</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <div class="dropdown">
                            <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1"
                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                Teilnehmer
                            </button>
                            <ul class="dropdown-menu p-1" aria-labelledby="dropdownMenu1">
                                <li><a href="{{ path('room_add_user',{'room':room.id}) }}" class="loadContent">
                                        Hinzufügen</a></li>
                                <li><a href="{{ path('room_show_user',{'room':room.id}) }}" class="loadContent">
                                        Anzeigen</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>

{% endblock %}
